﻿@model IEnumerable<Domain.Specialization>
@using Domain
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" media="screen" href="~/Content/HRCreatePosition.css" />
    <title>PerfomanceReview</title>
    <script>
        function changeBlock(id) {
            var skillLevels = document.querySelectorAll(".skillLevels");
            for (var i = 0; i < skillLevels.length; i++) {
                var skillLevelsId = skillLevels[i].id.substring(11);
                if (skillLevelsId == id) {
                    skillLevels[i].style = "display:inline-block";
                }
                else {
                    skillLevels[i].style = "display:none";
                }
            }
        }
        function changeSpecialization() {
            var dropspec = document.querySelector("#dropSpecializations");
            var specId = dropspec.options[dropspec.selectedIndex].value;
            var specializations = document.querySelectorAll("form.forSpecialization");
            for (var i = 0; i < specializations.length; i++) {
                var formSpecId = specializations[i].id.substring(14);
                if (formSpecId==specId) {
                    specializations[i].style = "display:inline-block";
                }
                else {
                    specializations[i].style = "display:none";
                }
            }
        }
    </script>
</head>
<body>
    <div id="performanceReview">
        <div id="chooseSpec">
            <p>Specialization</p>
            <select id="dropSpecializations" class="dropdownSpecializations" name="SpecializationId" onchange="changeSpecialization()" autofocus>
                <option value="">No specialization</option>
                @foreach (var specialization in Model)
                {
                    <option value="@specialization.SpecializationId">@specialization.Name</option>
                }
            </select>
        </div>
        @for (int i = 0; i < Model.Count(); i++)
        {
            int spcId = (Model.ElementAt(i) as Specialization).SpecializationId;
            <form method="post" class="position-container forSpecialization" id="specialization@(spcId)">
                <div class="createPosition-block">
                    <div class="positionSkills">
                        <p>Skills</p>
                        <ul class="block " id="skillsList" style="height:200px">
                            @for (int j = 0; j < Model.ElementAt(i).Skills.Count; j++)
                            {
                                <li id="skill@(j)" onclick="changeBlock(@j)">
                                    @Model.ElementAt(i).Skills.ElementAt(j).Name
                                </li>
                            }
                        </ul>
                    </div>
                    @for (int j = 0; j < Model.ElementAt(i).Skills.Count; j++)
                    {
                        <div class="skillLevels" id="skillLevels@(j)">
                            <p>Skill levels (@Model.ElementAt(i).Skills.ElementAt(j).Name)</p>
                            <ul class="block" id="skillLevelsList" style="height:200px">
                                @for (int k = 0; k < Model.ElementAt(i).Skills.ElementAt(j).SkillLevels.Count; k++)
                                {
                                    <li>
                                        @{
                                            var ch = k == 0 ? true : false;
                                        }
                                        <input type="radio" name="SkillLevels[@j].SkillLevelId" value=@Model.ElementAt(i).Skills.ElementAt(j).SkillLevels.ElementAt(k).SkillLevelId checked="@ch" />
                                        <label for="SkillLevels[@j].SkillLevelId">@Model.ElementAt(i).Skills.ElementAt(j).SkillLevels.ElementAt(k).Name</label>
                                        <br />
                                    </li>
                                }
                            </ul>
                        </div>
                    }
                </div>
                <input type="submit" class="submit" name="PerformanceReview" value="Submit" />
                <input type="hidden" name="SpecializationId" value=@Model.ElementAt(i).SpecializationId />
                <input type="hidden" name="EmployeeId" value=@(100) />

            </form>
        }
    </div>
</body>
</html>
